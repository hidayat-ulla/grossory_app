
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Bootstrap Sign Up Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h2 class="mb-4">Sign Up</h2>
        <input type="text" id="user_id" value="-1">
        <form class="needs-validation" name="needs-validation" novalidate id="signup-form">
            <div class="row mb-3">
                <div class="col">
                    <label for="firstname" class="form-label">First Name</label>
                    <input name="firstname" value="Simon" type="text" class="form-control" id="firstname" required>
                    <div class="invalid-feedback">First name is required.</div>
                </div>
                <div class="col">
                    <label for="lastname" class="form-label">Last Name</label>
                    <input name="lastname" value="Smith" type="text" class="form-control" id="lastname" required>
                    <div class="invalid-feedback">Last name is required.</div>
                </div>
            </div>
            <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <input name="username" value="simon.smith" type="text" class="form-control" id="username" required>
                <div class="invalid-feedback">Username is required.</div>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input name="password" value="password123" type="password" class="form-control" id="password" required
                    minlength="6">
                <div class="invalid-feedback">Password is required (min 6 characters).</div>
            </div>
            <div class="mb-3">
                <label class="form-label">Gender</label>
                <div>
                    <div class="form-check form-check-inline">
                        <input name="gender" checked class="form-check-input" type="radio" id="male" value="male"
                            required>
                        <label class="form-check-label" for="male">Male</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input name="gender" class="form-check-input" type="radio" id="female" value="female" required>
                        <label class="form-check-label" for="female">Female</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input name="gender" class="form-check-input" type="radio" id="other" value="other" required>
                        <label class="form-check-label" for="other">Other</label>
                    </div>
                </div>
                <div class="invalid-feedback d-block">Gender is required.</div>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input name="email" value="simon.smith@example.com" type="email" class="form-control" id="email"
                    required>
                <div class="invalid-feedback">Valid email is required.</div>
            </div>
            <div class="mb-3">
                <label for="confirmEmail" class="form-label">Confirm Email</label>
                <input name="confirmEmail" value="simon.smith@example.com" type="email" class="form-control"
                    id="confirmEmail" required>
                <div class="invalid-feedback" id="confirmEmailFeedback">Please confirm your email.</div>
            </div>
            <div class="mb-3">
                <label for="about" class="form-label">About Yourself</label>
                <textarea name="about" class="form-control" id="about" rows="3"
                    required>This is full stack JS Developer</textarea>
                <div class="invalid-feedback">Tell us about yourself.</div>
            </div>
            <button class="btn btn-primary" type="submit">Sign Up</button>
        </form>

        <!-- Sign Up Summary Table -->
        <div class="mt-5">
            <h4>Sign Up Summary</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Sr</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Username</th>
                        <th>Password</th>
                        <th>Gender</th>
                        <th>Email</th>
                        <th>About</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody id="summary-body">
                    <tr>
                        <td class="text-center" colspan="7">No Records Found</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        var userRecords = [];
        var signupForm = document.getElementById('signup-form');
        signupForm.addEventListener('submit', function (event) {
            event.preventDefault();

            formData = new FormData(signupForm);

            var userInfo = {}
            formData.forEach((value, key) => {
                userInfo[key] = value;
            });

            // userInfo = {
            //     firstName: formData.get('firstname'),
            //     lastName: formData.get('lastname'),
            //     username: formData.get('username'),
            //     password: formData.get('password'),
            //     gender: formData.get('gender'),
            //     email: formData.get('email'),
            //     about: formData.get('about'),
            // };

            userRecords.push(userInfo);
            renderUserRecords();
        });

        function deleteRecord(index) {

            if (!confirm('Delete krna hy ka nahi?')) {
                return;
            }

            console.log('delete index ', index);
            userRecords.splice(index, 1);
            renderUserRecords();
        }

        function editRecord(index) {
            console.log('edit index ', userRecords[index]);

            var student = userRecords[index];

            for (const key in student)
             {
                if (key === 'user_id')
                { 
                    document.querySelector(`[name="${key}"]`).value = index;
                }
                else
                {
                    document.querySelector(`[name="${key}"]`).value = student[key]
                }
                 
                    
            }
      

        }

        function renderUserRecords() {

            var recordsHtml = '';

            userRecords.forEach((element, index) => {
                recordsHtml += `
                    <tr>
                        <td>${userRecords.indexOf(element) + 1}</td>
                        <td>${element.firstname}</td>
                        <td>${element.lastname}</td>
                        <td>${element.username}</td>
                        <td>${element.password}</td>
                        <td>${element.gender}</td>
                        <td>${element.email}</td>
                        <td>${element.about}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteRecord(${index})">Delete</button>
                            <button class="btn btn-warning btn-sm" onclick="editRecord(${index})">Edit</button>
                        </td>
                    </tr>
                `;
            });

            // for (var i = 0; i < userRecords.length; i++) {
            //     recordsHtml += `
            //         <tr>
            //             <td>${i + 1}</td>
            //             <td>${userRecords[i].firstName + i}</td>
            //             <td>${userRecords[i].lastName}</td>
            //             <td>${userRecords[i].username}</td>
            //             <td>${userRecords[i].password}</td>
            //             <td>${userRecords[i].gender}</td>
            //             <td>${userRecords[i].email}</td>
            //             <td>${userRecords[i].about}</td>
            //             <td><button class="btn btn-danger btn-sm" onclick="deleteRecord(${i})">Delete</button></td>
            //         </tr>
            //     `;
            // }

            document.getElementById('summary-body').innerHTML = recordsHtml;
        }
    </script>
</body>

</html>
